\hypertarget{fe__main_read_8cpp_source}{}\section{fe\+\_\+main\+Read.\+cpp}
\label{fe__main_read_8cpp_source}\index{src/eema/src/\+Input-\/\+Output/\+Input/fe\+\_\+main\+Read.\+cpp@{src/eema/src/\+Input-\/\+Output/\+Input/fe\+\_\+main\+Read.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include<iomanip>}
00002 \textcolor{preprocessor}{#include "\hyperlink{functions_8h}{functions.h}"}
00003 \textcolor{keyword}{using namespace }\hyperlink{namespace_eigen}{Eigen};
00004 
00005 \textcolor{comment}{/* Home Folder and Job File */}
\Hypertarget{fe__main_read_8cpp_source_l00006}\hyperlink{fe__main_read_8cpp_a556ce46e457f991c51f3dac111579e2b}{00006} std::string \hyperlink{fe__main_read_8cpp_a556ce46e457f991c51f3dac111579e2b}{home\_path}; 
\Hypertarget{fe__main_read_8cpp_source_l00007}\hyperlink{fe__main_read_8cpp_a5e3d7c3d50f127de0e61daaa407dc7d1}{00007} std::string \hyperlink{fe__main_read_8cpp_a5e3d7c3d50f127de0e61daaa407dc7d1}{job\_file}; 
00009 \textcolor{comment}{/* Dimension of the Problem */}
\Hypertarget{fe__main_read_8cpp_source_l00010}\hyperlink{fe__main_read_8cpp_aa789fe4d8a13fd0990b630909430d5d0}{00010} \textcolor{keywordtype}{int} \hyperlink{fe__main_read_8cpp_aa789fe4d8a13fd0990b630909430d5d0}{ndof};
00011 
00012 \textcolor{comment}{/* Input meshes - number of meshes and type of meshes */}
\Hypertarget{fe__main_read_8cpp_source_l00013}\hyperlink{fe__main_read_8cpp_a509bc84434af1eff0173e4a71bd758ac}{00013} \textcolor{keywordtype}{int} \hyperlink{fe__main_read_8cpp_a509bc84434af1eff0173e4a71bd758ac}{num\_meshes};
\Hypertarget{fe__main_read_8cpp_source_l00014}\hyperlink{fe__main_read_8cpp_a6e08f89b32254fb4b129720418e7c6ea}{00014} \hyperlink{class_mesh}{Mesh} *\hyperlink{fe__main_read_8cpp_a6e08f89b32254fb4b129720418e7c6ea}{mesh};
00015 
00016 \textcolor{comment}{/* Material Properties are stored in here */}
\Hypertarget{fe__main_read_8cpp_source_l00017}\hyperlink{fe__main_read_8cpp_a39328cf72d69139b3b6c5b8ef6c636fe}{00017} \textcolor{keywordtype}{int} \hyperlink{fe__main_read_8cpp_a39328cf72d69139b3b6c5b8ef6c636fe}{material\_types};
\Hypertarget{fe__main_read_8cpp_source_l00018}\hyperlink{fe__main_read_8cpp_acfa6799b35f9301b5fc44e6043624797}{00018} \hyperlink{class_materials}{Materials} *\hyperlink{fe__main_read_8cpp_acfa6799b35f9301b5fc44e6043624797}{mat};
00019 
00020 \textcolor{comment}{/* Time Related Initialized Variables Stored Here */}
\Hypertarget{fe__main_read_8cpp_source_l00021}\hyperlink{fe__main_read_8cpp_a1b01a4354147da92a548ea1a5f96d592}{00021} \textcolor{keywordtype}{double} \hyperlink{fe__main_read_8cpp_a1b01a4354147da92a548ea1a5f96d592}{t\_start}; 
\Hypertarget{fe__main_read_8cpp_source_l00022}\hyperlink{fe__main_read_8cpp_a4b637c5fff609e604a3b2b2787f4a9fa}{00022} \textcolor{keywordtype}{double} \hyperlink{fe__main_read_8cpp_a4b637c5fff609e604a3b2b2787f4a9fa}{t\_end}; 
\Hypertarget{fe__main_read_8cpp_source_l00023}\hyperlink{fe__main_read_8cpp_ace6ace9b2f6d8d404ca9e66564289eb1}{00023} \textcolor{keywordtype}{int} \hyperlink{fe__main_read_8cpp_ace6ace9b2f6d8d404ca9e66564289eb1}{output\_frequency};
\Hypertarget{fe__main_read_8cpp_source_l00024}\hyperlink{fe__main_read_8cpp_a068c627ac33cf3c721d8f28eab205a83}{00024} \textcolor{keywordtype}{double} \hyperlink{fe__main_read_8cpp_a068c627ac33cf3c721d8f28eab205a83}{dt\_initial}; 
\Hypertarget{fe__main_read_8cpp_source_l00025}\hyperlink{fe__main_read_8cpp_a0a612324885914b6799185d54c48b310}{00025} \textcolor{keywordtype}{double} \hyperlink{fe__main_read_8cpp_a0a612324885914b6799185d54c48b310}{dt\_min}; 
\Hypertarget{fe__main_read_8cpp_source_l00026}\hyperlink{fe__main_read_8cpp_a7700f3aeb1ca1c9bbbf712dbfb0aa349}{00026} \textcolor{keywordtype}{double} \hyperlink{fe__main_read_8cpp_a7700f3aeb1ca1c9bbbf712dbfb0aa349}{reduction}; 
00028 \textcolor{comment}{/* Boundary Conditions Stored Here */}
\Hypertarget{fe__main_read_8cpp_source_l00029}\hyperlink{fe__main_read_8cpp_aad28f3904552ac6aa1642c44f0bc04e7}{00029} \textcolor{keywordtype}{int} \hyperlink{fe__main_read_8cpp_aad28f3904552ac6aa1642c44f0bc04e7}{bc\_types};
\Hypertarget{fe__main_read_8cpp_source_l00030}\hyperlink{fe__main_read_8cpp_a20bdb84bef6e8184528b6f4394cf4f7a}{00030} \hyperlink{class_b_c}{BC} *\hyperlink{fe__main_read_8cpp_a20bdb84bef6e8184528b6f4394cf4f7a}{bc};
00031 
\Hypertarget{fe__main_read_8cpp_source_l00032}\hyperlink{fe__main_read_8cpp_a8a64e915e17f876fe72bedd820e87c33}{00032} \textcolor{keywordtype}{void} \hyperlink{fe__main_read_8cpp_a8a64e915e17f876fe72bedd820e87c33}{fe\_mainRead}(std::string file)\{
00033 
00034   \hyperlink{fe__main_read_8cpp_a509bc84434af1eff0173e4a71bd758ac}{num\_meshes} = 0;
00035   \textcolor{keywordtype}{int} num\_meshes\_counter = 0;
00036   \hyperlink{fe__main_read_8cpp_a39328cf72d69139b3b6c5b8ef6c636fe}{material\_types} = 0;
00037   \textcolor{keywordtype}{int} material\_types\_counter = 0;
00038   \hyperlink{fe__main_read_8cpp_aad28f3904552ac6aa1642c44f0bc04e7}{bc\_types} = 0;
00039   \textcolor{keywordtype}{int} bc\_types\_counter = 0;
00040 
00041   std::ifstream myfile(file.c\_str());
00042   std::string line;
00043   std::getline(myfile,line);
00044 
00045   \textcolor{keywordflow}{while}(line!=\textcolor{stringliteral}{"*END"})\{
00046     \textcolor{keywordflow}{if}(line[0]==\textcolor{charliteral}{'*'})\{
00047         \textcolor{keywordflow}{if}(line==\textcolor{stringliteral}{"*MESH"})\{
00048           \hyperlink{fe__main_read_8cpp_a509bc84434af1eff0173e4a71bd758ac}{num\_meshes} = \hyperlink{fe__main_read_8cpp_a509bc84434af1eff0173e4a71bd758ac}{num\_meshes}+1;
00049         \}
00050         \textcolor{keywordflow}{if}(line==\textcolor{stringliteral}{"*MATERIAL"})\{
00051           \hyperlink{fe__main_read_8cpp_a39328cf72d69139b3b6c5b8ef6c636fe}{material\_types} = \hyperlink{fe__main_read_8cpp_a39328cf72d69139b3b6c5b8ef6c636fe}{material\_types}+1;
00052         \}
00053         \textcolor{keywordflow}{if}(line==\textcolor{stringliteral}{"*BC"})\{
00054           \hyperlink{fe__main_read_8cpp_aad28f3904552ac6aa1642c44f0bc04e7}{bc\_types} = \hyperlink{fe__main_read_8cpp_aad28f3904552ac6aa1642c44f0bc04e7}{bc\_types}+1;
00055         \}
00056     \}
00057     std::getline(myfile,line);
00058   \}
00059 
00060   mesh = \textcolor{keyword}{new} \hyperlink{class_mesh}{Mesh}[\hyperlink{fe__main_read_8cpp_a509bc84434af1eff0173e4a71bd758ac}{num\_meshes}];
00061   mat = \textcolor{keyword}{new} \hyperlink{class_materials}{Materials}[\hyperlink{fe__main_read_8cpp_a39328cf72d69139b3b6c5b8ef6c636fe}{material\_types}];
00062   bc = \textcolor{keyword}{new} \hyperlink{class_b_c}{BC}[\hyperlink{fe__main_read_8cpp_aad28f3904552ac6aa1642c44f0bc04e7}{bc\_types}];
00063 
00064   std::ifstream myfile1(file.c\_str());
00065   std::getline(myfile1,line);
00066 
00067 
00068 
00069   \textcolor{keywordflow}{while}(line!=\textcolor{stringliteral}{"*END"})\{
00070 
00071     \textcolor{keywordflow}{if}(line[0]==\textcolor{charliteral}{'*'})\{
00072 
00073         \textcolor{keywordflow}{if}(line==\textcolor{stringliteral}{"*DIMENSION"})\{
00074           \textcolor{keywordflow}{while} (line!=\textcolor{stringliteral}{"*END\_DIMENSION"}) \{
00075             myfile1 >> \hyperlink{fe__main_read_8cpp_aa789fe4d8a13fd0990b630909430d5d0}{ndof};
00076             myfile1 >> line;
00077           \}
00078           myfile1 >> line;
00079         \}
00080 
00081         \textcolor{keywordflow}{if}(line==\textcolor{stringliteral}{"*MESH"})\{
00082           std::getline(myfile1,line);
00083 
00084           \textcolor{keywordflow}{while}(line!=\textcolor{stringliteral}{"*END\_MESH"})\{
00085             MatrixXd nodes;
00086             MatrixXi elements;
00087 
00088             \textcolor{keywordflow}{if}(line==\textcolor{stringliteral}{"*NODES"})\{
00089               \textcolor{keywordtype}{int} rows = 0;
00090               \textcolor{keywordtype}{int} cols = 0;
00091               myfile1 >> rows;
00092               myfile1 >> cols;
00093               nodes = MatrixXd::Zero(rows,cols+1);
00094               \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<rows;i++)\{
00095                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=0;j<(cols+1);j++)\{
00096                   myfile1 >> nodes(i,j);
00097                 \}
00098               \}
00099               myfile1 >> line;
00100             \}
00101 
00102             \textcolor{keywordflow}{if}(line==\textcolor{stringliteral}{"*ELEMENTS"})\{
00103               \textcolor{keywordtype}{int} rows = 0;
00104               \textcolor{keywordtype}{int} cols = 0;
00105               myfile1 >> rows;
00106               myfile1 >> cols;
00107               elements = MatrixXi::Zero(rows,cols+2);
00108               \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<rows;i++)\{
00109                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=0;j<(cols+2);j++)\{
00110                   myfile1 >> elements(i,j);
00111                 \}
00112               \}
00113               myfile1 >> line;
00114             \}
00115 
00116             \textcolor{keywordflow}{if}(nodes.rows()!=0 && elements.rows()!=0)\{
00117               mesh[num\_meshes\_counter].\hyperlink{class_mesh_aba57df50d740f660cadf00aefe75e157}{readMesh}(nodes,elements);
00118               num\_meshes\_counter = num\_meshes\_counter + 1;
00119             \}
00120           \}
00121         \}
00122 
00123         \textcolor{keywordflow}{if}(line==\textcolor{stringliteral}{"*MATERIAL"})\{
00124             \textcolor{keywordtype}{int} mat\_id;
00125             std::string mat\_model;
00126             VectorXd mat\_properties = VectorXd::Zero(100);
00127             myfile1 >> mat\_id;
00128             myfile1 >> mat\_model;
00129             \textcolor{keywordtype}{int} i = 0;
00130             std::getline(myfile1,line);
00131               \textcolor{keywordflow}{while}(line!=\textcolor{stringliteral}{"*END\_MATERIAL"})\{
00132                 myfile1.seekg(-(line.length()),std::ios::cur);
00133                 myfile1 >> mat\_properties(i);
00134                 myfile1 >> line;
00135                 i = i+1;
00136               \}
00137             mat[material\_types\_counter].\hyperlink{class_materials_a06e59a5742730b2292d39b7488523505}{readMats}(mat\_id,mat\_model,mat\_properties);
00138             material\_types\_counter = material\_types\_counter + 1;
00139             myfile1 >> line;
00140         \}
00141 
00142         \textcolor{keywordflow}{if}(line==\textcolor{stringliteral}{"*TIME"})\{
00143           \textcolor{keywordflow}{while}(line!=\textcolor{stringliteral}{"*END\_TIME"})\{
00144             myfile1 >> \hyperlink{fe__main_read_8cpp_a1b01a4354147da92a548ea1a5f96d592}{t\_start};
00145             myfile1 >> \hyperlink{fe__main_read_8cpp_a4b637c5fff609e604a3b2b2787f4a9fa}{t\_end};
00146             myfile1 >> \hyperlink{fe__main_read_8cpp_ace6ace9b2f6d8d404ca9e66564289eb1}{output\_frequency};
00147             myfile1 >> \hyperlink{fe__main_read_8cpp_a0a612324885914b6799185d54c48b310}{dt\_min};
00148             \hyperlink{fe__main_read_8cpp_a068c627ac33cf3c721d8f28eab205a83}{dt\_initial} = \hyperlink{fe__main_read_8cpp_a0a612324885914b6799185d54c48b310}{dt\_min};
00149             myfile1 >> \hyperlink{fe__main_read_8cpp_a7700f3aeb1ca1c9bbbf712dbfb0aa349}{reduction};
00150             myfile1 >> line;
00151           \}
00152           myfile1>>line;
00153         \}
00154 
00155         \textcolor{keywordflow}{if}(line==\textcolor{stringliteral}{"*BC"})\{
00156           std::string type;
00157           \textcolor{keywordtype}{double} amplitude;
00158           \textcolor{keywordtype}{int} num\_dof;
00159           VectorXi dof;
00160           std::string time\_curve;
00161           \textcolor{keywordflow}{while}(line!=\textcolor{stringliteral}{"*END\_BC"})\{
00162             myfile1 >> type;
00163             myfile1 >> amplitude;
00164             myfile1 >> num\_dof;
00165             dof = VectorXi::Zero(num\_dof);
00166             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<num\_dof;i++)\{
00167               \textcolor{keywordtype}{int} tmp;
00168               myfile1 >> tmp;
00169               dof(i) = tmp;
00170             \}
00171             myfile1 >> time\_curve;
00172             myfile1 >> line;
00173           \}
00174           bc[bc\_types\_counter].\hyperlink{class_b_c_a8ceaa781f98b4128fa50611ff9481e1a}{readBC}(type,amplitude,num\_dof,dof,time\_curve);
00175           bc\_types\_counter = bc\_types\_counter + 1;
00176           myfile1 >> line;
00177         \}
00178 
00179     \}
00180     std::getline(myfile1,line);
00181   \}
00182 
00183 \}
\end{DoxyCode}
