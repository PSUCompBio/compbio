\hypertarget{fe__cal_simp_transformation_8cpp_source}{}\section{fe\+\_\+cal\+Simp\+Transformation.\+cpp}
\label{fe__cal_simp_transformation_8cpp_source}\index{src/eema/src/\+Elements/\+Element\+Calculations/fe\+\_\+cal\+Simp\+Transformation.\+cpp@{src/eema/src/\+Elements/\+Element\+Calculations/fe\+\_\+cal\+Simp\+Transformation.\+cpp}}

\begin{DoxyCode}
00001 
00002 
00003 \textcolor{preprocessor}{#include"\hyperlink{functions_8h}{functions.h}"}
00004 
00005 \textcolor{keyword}{using namespace }\hyperlink{namespace_eigen}{Eigen};
00006 
\Hypertarget{fe__cal_simp_transformation_8cpp_source_l00007}\hyperlink{fe__cal_simp_transformation_8cpp_ae2eeba997bf4f0bc4749b92130de7ba3}{00007} MatrixXd \hyperlink{fe__cal_simp_transformation_8cpp_ae2eeba997bf4f0bc4749b92130de7ba3}{fe\_calSimpTransformation}(MatrixXd truss\_nodes)\{
00008 \textcolor{comment}{// choice - 1: Stress Transformation Matrix}
00009 \textcolor{comment}{// choice - 2: Strain Transformation Matrix}
00010 
00011     MatrixXd T(3,3);
00012     \textcolor{keywordtype}{double} l\_1,l\_2,l\_3,m\_1,m\_2,m\_3,n\_1,n\_2,n\_3;
00013 
00014     Vector3d dir\_truss\_x(3);
00015     dir\_truss\_x(0) = truss\_nodes(1,1) - truss\_nodes(0,1);
00016     dir\_truss\_x(1) = truss\_nodes(1,2) - truss\_nodes(0,2);
00017     dir\_truss\_x(2) = truss\_nodes(1,3) - truss\_nodes(0,3);
00018 
00019     Vector3d dir\_truss\_y(3);
00020     Vector3d dir\_truss\_z(3);
00021     
00022     \textcolor{keywordflow}{if}(dir\_truss\_x(0)!=0)\{
00023         dir\_truss\_y(1) = 1; 
00024         dir\_truss\_y(2) = 1;
00025         dir\_truss\_y(0) = -((dir\_truss\_x(1)+dir\_truss\_x(2))/dir\_truss\_x(0));
00026     \}
00027     \textcolor{keywordflow}{else}\{
00028         \textcolor{keywordflow}{if}((dir\_truss\_x(0)==0) && (dir\_truss\_x(1)!=0))\{
00029             dir\_truss\_y(0) = 1;
00030             dir\_truss\_y(2) = 1;
00031             dir\_truss\_y(1) = -((dir\_truss\_x(2)+dir\_truss\_x(0))/dir\_truss\_x(1));     
00032         \}
00033         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}((dir\_truss\_x(0)==0) && (dir\_truss\_x(2)!=0))\{
00034             dir\_truss\_y(0) = 1;
00035             dir\_truss\_y(1) = 1;
00036             dir\_truss\_y(2) = -((dir\_truss\_x(0)+dir\_truss\_x(1))/dir\_truss\_x(2)); 
00037         \}
00038         \textcolor{keywordflow}{else}\{
00039             std::cout<<\textcolor{stringliteral}{"Truss element is not practically possible"}<<\textcolor{stringliteral}{"\(\backslash\)n"};
00040         \}
00041     \}
00042     
00043     dir\_truss\_z = dir\_truss\_x.cross(dir\_truss\_y);
00044 
00045     VectorXd dir\_global\_x(3);
00046     dir\_global\_x << 1, 0, 0;
00047     
00048     VectorXd dir\_global\_y(3);
00049     dir\_global\_y << 0, 1, 0;
00050 
00051     VectorXd dir\_global\_z(3);
00052     dir\_global\_z << 0, 0, 1;
00053 
00054     l\_1 = (dir\_global\_x.dot(dir\_truss\_x))/(dir\_global\_x.norm()*dir\_truss\_x.norm());
00055     l\_2 = (dir\_global\_x.dot(dir\_truss\_y))/(dir\_global\_x.norm()*dir\_truss\_y.norm());
00056     l\_3 = (dir\_global\_x.dot(dir\_truss\_z))/(dir\_global\_x.norm()*dir\_truss\_z.norm()); 
00057     m\_1 = (dir\_global\_y.dot(dir\_truss\_x))/(dir\_global\_y.norm()*dir\_truss\_x.norm()); 
00058     m\_2 = (dir\_global\_y.dot(dir\_truss\_y))/(dir\_global\_y.norm()*dir\_truss\_y.norm());
00059     m\_3 = (dir\_global\_y.dot(dir\_truss\_z))/(dir\_global\_y.norm()*dir\_truss\_z.norm());
00060     n\_1 = (dir\_global\_z.dot(dir\_truss\_x))/(dir\_global\_z.norm()*dir\_truss\_x.norm());
00061     n\_2 = (dir\_global\_z.dot(dir\_truss\_y))/(dir\_global\_z.norm()*dir\_truss\_y.norm());
00062     n\_3 = (dir\_global\_z.dot(dir\_truss\_z))/(dir\_global\_z.norm()*dir\_truss\_z.norm());
00063 
00064     T.row(0) << l\_1, m\_1, n\_1;
00065     T.row(1) << l\_2, m\_2, n\_2;
00066     T.row(2) << l\_3, m\_3, n\_3;
00067 
00068     \textcolor{keywordflow}{return} T;
00069 \}
\end{DoxyCode}
